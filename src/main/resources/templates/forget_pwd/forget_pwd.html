<!doctype html>
<!--suppress ALL-->
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
	<link rel="icon" href="http://localhost:8888/qq_system/user/image/fa45da3cb14d43bdbsefb1410e5e22579.ico"/>
	<link rel="stylesheet" th:href="@{/css/common/bootstrap.min.css}" crossorigin="anonymous">
	<link rel="stylesheet" th:href="@{/css/global.css}" />
	<link rel="stylesheet" th:href="@{/css/login.css}" />
	<title>聊天系统-忘记密码</title>
</head>
<body>
	<div class="nk-container">

		<!-- 内容 -->
		<div class="main">
			<div class="container pl-5 pr-5 pt-3 pb-3 mt-3 mb-3">
				<h3 class="text-center text-info border-bottom pb-3">找&nbsp;&nbsp;回&nbsp;&nbsp;密&nbsp;&nbsp;码</h3>
				<form class="mt-5" th:action="@{register}" method="post">
					<div class="form-group row">
						<label for="email" class="col-sm-2 col-form-label text-right">邮箱:</label>
						<div class="col-sm-10">
							<input type="email" class="form-control" id="email" name="email" placeholder="请输入您的邮箱!" required>
							<div class="invalid-feedback" >
							</div>
						</div>
					</div>
					<div class="form-group row mt-4">
						<label for="verifycode" class="col-sm-2 col-form-label text-right">验证码:</label>
						<div class="col-sm-6">
							<input type="text" class="form-control" id="verifycode" name="varifyCodeCommited" placeholder="请输入验证码!">
						</div>
						<div class="col-sm-4">
							<input id="sendCode" type="button" onclick="getVarifyCode()" value="获取验证码">
						</div>
					</div>
					<div class="form-group row mt-4">
						<div class="col-sm-2"></div>
						<div class="col-sm-10 text-center">
						</div>
					</div>
				</form>
				<button class="btn btn-info text-white form-control" onclick="alert('暂未实现此功能！')">下一步</button>
			</div>
		</div>


	</div>

	<script th:src="@{/js/common/jquery-3.3.1.min.js}" crossorigin="anonymous"></script>
	<script th:src="@{/js/common/popper.min.js}" crossorigin="anonymous"></script>
	<script th:src="@{/js/common/bootstrap.min.js}" crossorigin="anonymous"></script>
	<script th:src="@{/js/jquery-1.8.3.min.js}"></script>
	<!--<script th:src="@{/js/global.js}"></script>-->
	<script th:src="@{/js/register.js}"></script>
	<script>

		function getVarifyCode() {
		    var email = $("#email").val();
		    if(email==null||email==""){
		        alert("请输入邮箱！")
				return;
			}
			$.ajax({
				url:"/qq_system/user/sendEmailCode?email="+email,
				success:function (data) {
					if(data=="success!"){
                        last60Seconds();
					}else{
					    alert(data)
					}
                }
			});
        }

        var cnt = 0;
        setInterval(
            function () {
                if(cnt>0){
                    cnt--;
                    $("#sendCode").val(cnt+"s后重新发送");
                }else{
                    $("#sendCode").attr("disabled",false);
                    $("#sendCode").val("获取验证码");
                }
            },1000
        )
        //倒计时60秒函数
        function last60Seconds() {
            $("#sendCode").attr("disabled",true);
		    cnt = 5;
        }

	</script>
</body>
</html>
